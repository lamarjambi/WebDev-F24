<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My p5.js Game Portfolio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <!-- Add any additional p5.js libraries your games use -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
    
    <style>
        .portfolio-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-section {
            margin: 40px 0;
            text-align: center;
        }

        .game-container {
            display: inline-block;
            margin: 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        /* Ensure canvas is responsive */
        canvas {
            max-width: 100% !important;
            height: auto !important;
        }

        /* Hide any original p5.js canvas if it appears outside container */
        body > canvas {
            display: none;
        }
    </style>
</head>
<body>
    <div class="portfolio-container">
        <h1>My Game Portfolio</h1>

        <!-- Game 1 Section -->
        <div class="game-section">
            <h2>Snake Game</h2>
            <div class="game-container" id="snake-game">
                <!-- p5.js sketch will be inserted here -->
            </div>
            <script src="path/to/snake-game.js"></script>
        </div>

        <!-- Game 2 Section -->
        <div class="game-section">
            <h2>Platformer</h2>
            <div class="game-container" id="platformer">
                <!-- p5.js sketch will be inserted here -->
            </div>
            <script src="path/to/platformer.js"></script>
        </div>
    </div>

    <!-- Main script to handle the embedding -->
    <script>
        // Function to modify existing sketches to use instance mode
        function wrapSketchInInstance(containerId) {
            // Store the original setup and draw functions
            const originalSetup = window.setup;
            const originalDraw = window.draw;
            
            // Create new p5 instance
            new p5(function(sketch) {
                // Copy all existing p5 functions to the instance
                for (let prop in window) {
                    if (typeof window[prop] === 'function') {
                        sketch[prop] = window[prop].bind(sketch);
                    }
                }

                // Override setup to create canvas in container
                sketch.setup = function() {
                    let canvas = originalSetup.call(sketch);
                    if (canvas) {
                        canvas.parent(containerId);
                    } else {
                        // If setup doesn't return canvas, move the last created one
                        sketch._renderer.canvas.parentElement.removeChild(sketch._renderer.canvas);
                        document.getElementById(containerId).appendChild(sketch._renderer.canvas);
                    }
                };

                // Use original draw function
                sketch.draw = function() {
                    originalDraw.call(sketch);
                };
            });
        }

        // Initialize each game
        window.addEventListener('load', function() {
            // Wrap each sketch in instance mode
            wrapSketchInInstance('snake-game');
            wrapSketchInInstance('platformer');
        });
    </script>
</body>
</html>